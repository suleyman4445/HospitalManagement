<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Doctor Dashboard</title>
    <link rel="stylesheet" th:href="@{/css/doctor-dashboard.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script defer th:src="@{/js/doctor-dashboard.js}"></script>
</head>
<body>

    <header class="navbar">
        <div class="brand">
            <div class="logo">ðŸ©º <span>HealthCare+</span></div>
        </div>

        <nav class="nav-links" role="navigation" aria-label="Main navigation">
            <a th:href="@{/doctor/queue}" class="nav-item">Queue</a>
            <a th:href="@{/doctor/appointments}" class="nav-item">Appointments</a>
            <a th:href="@{/doctor/profile}" class="nav-item">Profile</a>
            <a th:href="@{/logout}" class="nav-item logout">Logout</a>
        </nav>
    </header>

    <main class="container">
        <section class="welcome">
            <div class="welcome-text">
                <h1 th:text="'Welcome, Dr. ' + ${doctor.name} + '!'">Welcome, Dr. [Name]!</h1>
                <p class="muted">Hereâ€™s whatâ€™s happening with your patients â€” quick actions and updates at a glance.</p>
            </div>
            <div class="quick-actions">
                <div class="dashboard-card" th:onclick="|location.href='@{/doctor/queue}'|">
                    <h3>Today's Queue</h3>
                    <p>View today's appointments</p>
                </div>
                <div class="dashboard-card" th:onclick="|location.href='@{/doctor/addAvailability}'|">
                    <h3>Update Availability</h3>
                    <p>Change your Week-day's Availability</p>
                </div>
            </div>
        </section>

        <section class="dashboard-grid">
            <div class="dashboard-card" th:onclick="|window.location='@{/doctor/allAppointments}'|">
                <h3>Appointments</h3>
                <p>View upcoming and past appointments</p>
            </div>

            <div class="dashboard-card" th:onclick="|window.location='@{/doctor/messages}'|">
                <h3>Messages</h3>
                <p>Check patient messages and responses</p>
            </div>

            <div class="dashboard-card" th:onclick="|window.location='@{/doctor/patientHistory}'|">
                <h3>Patient History</h3>
                <p>Access medical history and notes</p>
            </div>

            <div class="dashboard-card" th:onclick="|window.location='@{/doctor/prescriptions}'|">
                <h3>Prescriptions</h3>
                <p>Create or review prescriptions</p>
            </div>

            <div class="dashboard-card" th:onclick="|window.location='@{/doctor/profile}'|">
                <h3>Profile</h3>
                <p>Update your contact and info</p>
            </div>

            <div class="dashboard-card logout" th:onclick="|window.location='@{/logout}'|">
                <h3>Logout</h3>
                <p>Sign out from dashboard</p>
            </div>
        </section>

        <section th:if="${nextAppointment != null}" class="panel">
            <!-- Header Row -->
            <button class="panel-toggle" aria-expanded="false">
                <span class="title">Upcoming Appointment</span>
                <span class="patient-info">
                    <strong>Patient:</strong> <span th:text="${nextAppointment.patient.name != null ?
						nextAppointment.patient.name : 'Unknown'}">Mr. Sharma</span>
                    <strong>Date:</strong> <span th:text="${nextAppointment.appointmentDate != null ? 
						nextAppointment.appointmentDate : 'Unknown'}">2025-08-04</span>
                </span>
                <span class="arrow">â–¼</span>
            </button>

            <!-- Dropdown content -->
            <div class="panel-content">
                <div th:if="${nextAppointment != null}" class="appointment-card">
                    <p><strong>Patient:</strong> <span th:text="${nextAppointment.patient.name != null ?
						nextAppointment.patient.name : 'Unknown'}">Mr. Sharma</span></p>
                    <p><strong>Date:</strong> <span th:text="${nextAppointment.appointmentDate != null ? 
						nextAppointment.appointmentDate : 'Unknown'}">2025-08-04</span></p>
                    <p><strong>Time:</strong> <span th:text="${nextAppointment.appointmentTime != null ? 
						nextAppointment.appointmentTime : 'Unknown'}">10:30 AM</span></p>
                    <p><strong>Status:</strong> <span th:text="${nextAppointment.status != null ? 
						nextAppointment.status : 'Unknown'}">Confirmed</span></p>
                    <div class="appointment-actions">
                        <a th:href="@{/doctor/appointments}" class="btn">View All</a>
                        <a th:href="@{/appointment/reschedule/{id}(id=${nextAppointment.id})}" class="btn">Reschedule</a>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- <script>
        document.querySelectorAll('.panel-toggle').forEach(toggle => {
            toggle.addEventListener('click', () => {
                const expanded = toggle.getAttribute('aria-expanded') === 'true';
                toggle.setAttribute('aria-expanded', !expanded);

                const patientInfo = toggle.querySelector('.patient-info');
                const content = toggle.nextElementSibling;

                if (!expanded) {
                    // Opening
                    patientInfo.style.display = 'none';
                    content.classList.add('open');
                } else {
                    // Closing
                    patientInfo.style.display = '';
                    content.classList.remove('open');
                }
            });
        });
    </script> -->

</body>
</html>
